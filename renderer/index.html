<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>移记 - 捕捉好点子</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- 标题栏 -->
    <div class="title-bar">
        <div class="title-bar-text">


            <img src="../assets/tray-icon.png" alt="移记" class="app-icon">
            <span>移记</span>
        </div>
        <div class="title-bar-controls">
            <button id="minimize-btn" class="control-btn" title="最小化">➖</button>
            <button id="close-btn" class="control-btn" title="隐藏">✖️</button>
        </div>
    </div>

    <!-- 主要内容区域 -->
    <div class="main-container">
        <!-- 选项卡导航 -->
        <div class="tab-nav">
            <button class="tab-btn active" data-tab="clipboard">📋 剪切板</button>
            <button class="tab-btn" data-tab="todo">✅ 待办</button>
            <button class="tab-btn" data-tab="notes">📝 笔记</button>
            <button class="tab-btn" data-tab="community">🌐 在线</button>
            <button class="tab-btn" data-tab="settings">⚙️ 设置</button>
        </div>

        <!-- 剪切板面板 -->
        <div id="clipboard-panel" class="panel active">
            <div class="panel-header">
                <h3>剪切板历史</h3>
                <div class="header-controls">
                    <button id="clear-clipboard" class="btn btn-secondary">清理</button>
                    <input type="text" id="clipboard-search" placeholder="搜索剪切板内容..." class="search-input">
                </div>
            </div>
            <div class="clipboard-list" id="clipboard-list">
                <!-- 剪切板项目将在这里动态生成 -->
            </div>
        </div> <!-- 待办清单面板 -->
        <div id="todo-panel" class="panel">
            <div class="panel-header">
                <h3>待办清单</h3>
                <div class="header-controls">
                    <select id="todo-filter" class="filter-select">
                        <option value="all">全部</option>
                        <option value="pending">待完成</option>
                        <option value="completed">已完成</option>
                        <option value="high">高优先级</option>
                    </select>
                    <button id="add-todo" class="btn btn-primary">➕ 添加</button>
                </div>
            </div>
            <div class="todo-list" id="todo-list">
                <!-- 待办事项将在这里动态生成 -->
            </div>
        </div> <!-- 笔记面板 -->
        <div id="notes-panel" class="panel">
            <div class="panel-header">
                <h3>Markdown 编辑器</h3>
                <div class="header-controls">
                    <button id="open-workspace-folder" class="btn btn-primary" title="选择其他工作文件夹">📂</button>
                    <button id="toggle-sidebar" class="btn btn-primary" title="收起/展开侧边栏">↔️</button>
                    <button id="new-note" class="btn btn-primary" title="新建笔记">➕</button>
                    <button id="toggle-preview" class="btn btn-primary" title="预览/编辑">👁️</button>
                    <div class="auto-save-status" id="auto-save-status">
                        <span class="save-indicator">✅ 已保存</span>
                    </div>
                </div>
            </div>
            <div class="notes-container">
                <div class="notes-sidebar">
                    <!-- 工作区信息 -->                    <div class="workspace-info" id="workspace-info" style="display: none;">
                        <div class="workspace-header">
                            <h4>工作文件夹</h4>
                        </div>
                        <div class="workspace-name" id="workspace-name"></div>
                        <div class="workspace-path" id="workspace-path"></div>
                    </div>
                    <!-- 文件列表 -->
                    <div class="notes-list" id="notes-list">
                        <!-- 文件列表将在这里生成 -->
                    </div>
                </div>
                <div class="notes-editor">
                    <div class="editor-content">
                        <textarea id="markdown-editor" placeholder="选择或创建一个Markdown文件开始编辑...支持 Markdown 语法"></textarea>
                        <div id="markdown-preview" class="markdown-preview" style="display: none;">
                            <!-- Markdown预览内容将在这里显示 -->
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- 社区面板 -->
        <div id="community-panel" class="panel">
            <div class="panel-header">
                <h3>在线访问</h3>                <div class="header-controls">
                    <div class="preset-websites" id="preset-websites">
                        <!-- 预设网站按钮将在这里动态生成 -->
                    </div>
                    <button id="settings-preview" class="btn btn-secondary" title="设置预览页面">⚙️</button>
                    <button id="refresh-community" class="btn btn-secondary" title="刷新页面">🔄</button>
                    <button id="open-external-community" class="btn btn-secondary" title="在外部浏览器打开">🔗</button>
                </div>
            </div>
            <div class="community-container">
                <div class="webview-container">
                    <webview id="community-webview" src="http://8.130.41.186:3000/"
                        style="width: 100%; height: 100%; border: none;" allowpopups nodeintegration="false"
                        websecurity="true" disablewebsecurity="false">
                    </webview>
                    <div class="loading-overlay" id="community-loading">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                            <span>正在加载页面...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 设置面板 -->
        <div id="settings-panel" class="panel">
            <div class="panel-header">
                <h3>应用设置</h3>
            </div>
            <div class="settings-content">
                <div class="setting-group">
                    <h4><span class="group-icon">🎨</span> 外观设置</h4>
                    <div class="setting-item">
                        <label for="theme-select" class="setting-label">
                            <span class="setting-icon">🌓</span>
                            主题选择
                        </label>
                        <select id="theme-select" class="setting-select">
                            <option value="light">☀️ 浅色主题</option>
                            <option value="dark">🌙 深色主题</option>
                            <option value="auto">🔄 跟随系统</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label checkbox-setting">
                            <span class="setting-icon">✨</span>
                            <span class="setting-text">启用毛玻璃效果</span>
                            <input type="checkbox" id="glass-effect" checked class="setting-checkbox">
                            <span class="checkbox-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-group">
                    <h4><span class="group-icon">⚙️</span> 功能设置</h4>
                    <div class="setting-item">
                        <label class="setting-label checkbox-setting">
                            <span class="setting-icon">🚀</span>
                            <span class="setting-text">开机自启动</span>
                            <input type="checkbox" id="auto-start" checked class="setting-checkbox">
                            <span class="checkbox-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label checkbox-setting">
                            <span class="setting-icon">📋</span>
                            <span class="setting-text">监控剪切板变化</span>
                            <input type="checkbox" id="clipboard-monitor" checked class="setting-checkbox">
                            <span class="checkbox-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="max-clipboard-items" class="setting-label">
                            <span class="setting-icon">📊</span>
                            剪切板历史数量
                        </label>
                        <div class="number-input-group">
                            <input type="number" id="max-clipboard-items" value="100" min="10" max="1000"
                                class="setting-input number-input">
                            <span class="input-unit">条</span>
                        </div>
                    </div>
                    <div class="setting-item url-setting-item">
                        <div class="setting-label-section">
                            <label for="community-url" class="setting-main-label">
                                <span class="setting-icon">🌐</span>
                                在线页面地址
                            </label>
                            <p class="setting-description">选择或自定义在线页面访问地址</p>
                        </div>
                        <div class="setting-control-section">
                            <div class="url-preset-group">
                                <label for="url-preset" class="preset-label">快速选择：</label>
                                <select id="url-preset" class="setting-select preset-select">
                                    <option value="">选择预设页面</option>
                                    <option value="http://8.130.41.186:3000/">🏠 默认社区</option>
                                    <option value="https://www.doubao.com/chat/">🤖 豆包 AI</option>
                                    <option value="https://chat.openai.com/">💬 ChatGPT</option>
                                    <option value="https://yuanbao.tencent.com/chat/">💎 腾讯元宝</option>
                                    <option value="https://grok.dairoot.cn/">🚀 Grok</option>
                                    <option value="https://gemini.google.com/">💫 Gemini</option>
                                    <option value="https://www.bing.com/">🔍 必应</option>
                                    <option value="https://www.google.com/">🌏 Google</option>
                                    <option value="custom">✏️ 自定义...</option>
                                </select>
                            </div>
                            <div class="url-input-container">
                                <label for="community-url" class="url-label">自定义地址：</label>
                                <div class="url-input-group">
                                    <input type="url" id="community-url" value="http://8.130.41.186:3000/"
                                        placeholder="请输入完整的URL地址（包含 http:// 或 https://）"
                                        class="setting-input url-input">
                                    <button id="apply-community-url" class="btn btn-primary btn-small apply-btn"
                                        title="应用新地址">
                                        <span class="btn-icon">✓</span>
                                        <span>应用</span>
                                    </button>
                                </div>
                            </div>
                            <div class="setting-hint">
                                <span class="hint-icon">💡</span>
                                修改后点击"应用"按钮生效，支持 http:// 和 https:// 协议
                            </div>
                        </div>
                    </div>
                </div>
                <div class="setting-group">
                    <h4><span class="group-icon">⌨️</span> 快捷键</h4>
                    <div class="setting-item">
                        <label class="setting-label">
                            <span class="setting-icon">👁️</span>
                            显示/隐藏窗口
                        </label>
                        <span class="shortcut-display">Ctrl + Shift + V</span>
                    </div>
                </div>

                <div class="setting-group">
                    <h4><span class="group-icon">ℹ️</span> 关于</h4>
                    <div class="setting-item">
                        <label class="setting-label">
                            <span class="setting-icon">📦</span>
                            应用版本
                        </label>
                        <span class="version-display">v<span id="app-version">1.0.0</span></span>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">
                            <span class="setting-icon">🔄</span>
                            检查更新
                        </div>
                        <button id="check-updates" class="btn btn-primary btn-small">检查更新</button>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- 添加待办事项模态框 -->
    <div id="add-todo-modal" class="modal add-todo-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="modal-icon">✅</span>
                    <h3>添加新的待办事项</h3>
                </div>
                <button class="modal-close" aria-label="关闭">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-todo-form" class="todo-form">
                    <div class="form-group">
                        <label for="todo-title" class="form-label">
                            <span class="label-icon">📝</span>
                            事项标题 <span class="required">*</span>
                        </label>
                        <input type="text" id="todo-title" class="form-input" placeholder="请输入待办事项的标题..." required
                            maxlength="100">
                        <div class="input-feedback" id="title-feedback"></div>
                    </div>

                    <div class="form-group">
                        <label for="todo-description" class="form-label">
                            <span class="label-icon">📄</span>
                            详细描述
                        </label>
                        <textarea id="todo-description" class="form-textarea" placeholder="可选：添加更详细的描述或备注..." rows="3"
                            maxlength="500"></textarea>
                        <div class="char-counter">
                            <span id="desc-counter">0</span>/500
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="todo-priority" class="form-label">
                                <span class="label-icon">⭐</span>
                                优先级
                            </label>
                            <select id="todo-priority" class="form-select">
                                <option value="low">🟢 低优先级</option>
                                <option value="medium" selected>🟡 中等优先级</option>
                                <option value="high">🔴 高优先级</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="todo-category" class="form-label">
                                <span class="label-icon">🏷️</span>
                                分类标签
                            </label>
                            <select id="todo-category" class="form-select">
                                <option value="">选择分类</option>
                                <option value="work">💼 工作</option>
                                <option value="personal">👤 个人</option>
                                <option value="study">📚 学习</option>
                                <option value="health">💪 健康</option>
                                <option value="other">📌 其他</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="todo-deadline" class="form-label">
                            <span class="label-icon">📅</span>
                            截止日期
                        </label>
                        <input type="datetime-local" id="todo-deadline" class="form-input">
                        <div class="input-help">
                            选择截止日期和时间（可选）
                        </div>
                    </div>

                    <div class="form-features">
                        <div class="feature-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="todo-reminder" class="form-checkbox">
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    <span class="feature-icon">🔔</span>
                                    设置提醒通知
                                </span>
                            </label>
                        </div>

                        <div class="feature-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="todo-pomodoro" class="form-checkbox">
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    <span class="feature-icon">🍅</span>
                                    启用番茄时钟
                                </span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-todo">
                    <span class="btn-icon">❌</span>
                    取消
                </button>
                <button type="submit" class="btn btn-primary" form="add-todo-form" id="save-todo">
                    <span class="btn-icon">✅</span>
                    创建待办事项
                </button>
            </div>
        </div>
    </div> <!-- 番茄时钟模态框 -->
    <div id="pomodoro-modal" class="modal pomodoro-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="modal-icon">🍅</span>
                    <h3>番茄专注计时器</h3>
                </div>
                <button class="modal-close" aria-label="关闭">&times;</button>
            </div>
            <div class="modal-body">
                <div class="pomodoro-display">
                    <div class="pomodoro-circle">
                        <div class="pomodoro-progress">
                            <svg class="progress-ring" width="220" height="220">
                                <defs>
                                    <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#ee5a52;stop-opacity:1" />
                                    </linearGradient>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="3" result="coloredBlur" />
                                        <feMerge>
                                            <feMergeNode in="coloredBlur" />
                                            <feMergeNode in="SourceGraphic" />
                                        </feMerge>
                                    </filter>
                                </defs>
                                <circle class="progress-ring-bg" cx="110" cy="110" r="100" />
                                <circle class="progress-ring-fill" cx="110" cy="110" r="100" />
                            </svg>
                            <div class="time-display" id="pomodoro-time">25:00</div>
                            <div class="progress-indicator">
                                <span class="session-type" id="session-type">工作时间</span>
                                <div class="progress-dots">
                                    <span class="dot active"></span>
                                    <span class="dot"></span>
                                    <span class="dot"></span>
                                    <span class="dot"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pomodoro-status">
                        <div class="status-card">
                            <span class="status-icon">⏱️</span>
                            <span id="pomodoro-status">准备开始专注时间</span>
                        </div>
                    </div>

                    <div class="pomodoro-controls">
                        <button id="pomodoro-start" class="btn btn-primary pomodoro-btn">
                            <span class="btn-icon">▶️</span>
                            开始专注
                        </button>
                        <button id="pomodoro-pause" class="btn btn-secondary pomodoro-btn" style="display: none;">
                            <span class="btn-icon">⏸️</span>
                            暂停
                        </button>
                        <button id="pomodoro-reset" class="btn btn-danger pomodoro-btn">
                            <span class="btn-icon">🔄</span>
                            重置
                        </button>
                    </div>
                </div>

                <div class="pomodoro-stats">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="completed-sessions">0</div>
                            <div class="stat-label">🎯 完成轮次</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="focus-time">0</div>
                            <div class="stat-label">⏰ 专注时长</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="break-time">0</div>
                            <div class="stat-label">☕ 休息时长</div>
                        </div>
                    </div>
                </div>

                <div class="pomodoro-settings">
                    <div class="settings-header">
                        <h4>⚙️ 时间设置</h4>
                        <div class="settings-toggle">
                            <span class="toggle-text">高级设置</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="advanced-toggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-basic">
                        <div class="setting-row">
                            <div class="setting-item">
                                <label for="work-duration">
                                    <span class="setting-icon">🔥</span>
                                    工作时长（分钟）
                                </label>
                                <div class="input-group">
                                    <button class="input-btn minus" data-target="work-duration">-</button>
                                    <input type="number" id="work-duration" value="25" min="1" max="60"
                                        class="setting-input">
                                    <button class="input-btn plus" data-target="work-duration">+</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="break-duration">
                                    <span class="setting-icon">☕</span>
                                    休息时长（分钟）
                                </label>
                                <div class="input-group">
                                    <button class="input-btn minus" data-target="break-duration">-</button>
                                    <input type="number" id="break-duration" value="5" min="1" max="30"
                                        class="setting-input">
                                    <button class="input-btn plus" data-target="break-duration">+</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-advanced" style="display: none;">
                        <div class="setting-row">
                            <div class="setting-item">
                                <label for="long-break-duration">
                                    <span class="setting-icon">🛌</span>
                                    长休息时长（分钟）
                                </label>
                                <div class="input-group">
                                    <button class="input-btn minus" data-target="long-break-duration">-</button>
                                    <input type="number" id="long-break-duration" value="15" min="5" max="60"
                                        class="setting-input">
                                    <button class="input-btn plus" data-target="long-break-duration">+</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <label for="sessions-until-long-break">
                                    <span class="setting-icon">🔄</span>
                                    长休息间隔（轮次）
                                </label>
                                <div class="input-group">
                                    <button class="input-btn minus" data-target="sessions-until-long-break">-</button>
                                    <input type="number" id="sessions-until-long-break" value="4" min="2" max="8"
                                        class="setting-input">
                                    <button class="input-btn plus" data-target="sessions-until-long-break">+</button>
                                </div>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-item full-width">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="auto-start-breaks" class="setting-checkbox">
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        <span class="setting-icon">🚀</span>
                                        自动开始休息时间
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-row">
                            <div class="setting-item full-width">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="sound-notifications" class="setting-checkbox" checked>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        <span class="setting-icon">🔔</span>
                                        启用声音提醒
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>

</html>