# 网站图标自动获取功能使用说明

## 📝 功能介绍

现在在线页面预设网站的图标显示已经支持自动获取，不再需要手动设置！

## 🚀 新特性

### 1. 自动获取图标
- **添加新网站时自动获取**：在预设网站管理器中输入URL后，系统会自动获取该网站的图标
- **URL变化时实时更新**：修改现有网站的URL时，图标会自动更新
- **一键获取按钮**：每个网站条目旁边都有魔法棒按钮 🪄，点击可手动触发图标获取

### 2. 批量更新功能
- **批量更新所有图标**：在预设网站管理器中点击"批量更新图标"按钮
- **智能更新策略**：只更新缺失或无效的图标，避免不必要的网络请求
- **后台自动更新**：应用启动时会在后台检查并更新需要的图标

### 3. 多重备用方案
- **主要API**：使用 `https://v2.xxapi.cn/api/ico` 获取高质量图标
- **备用方案**：如果主API失败，自动切换到Google Favicon服务
- **重试机制**：支持最多3次重试，确保获取成功率

## 🛠️ 技术实现

### API接口
```javascript
// 使用的API接口
https://v2.xxapi.cn/api/ico?url=网站地址

// 返回格式
{
  "code": 200,
  "data": "图标URL"
}
```

### 使用流程
1. 输入或修改网站URL
2. 系统自动调用API获取图标
3. 显示加载状态（旋转图标）
4. 成功后更新图标显示
5. 失败时显示默认图标

## 📱 界面变化

### 预设网站管理器
- **图标预览区域**：显示当前网站的图标
- **自动获取按钮**：魔法棒图标，点击手动获取
- **批量更新按钮**：一键更新所有网站图标
- **实时预览**：URL输入时实时显示获取状态

### 预设网站按钮
- **支持图片图标**：可以显示从网站获取的真实favicon
- **自动回退**：如果图标加载失败，自动显示默认图标
- **更美观显示**：真实的网站图标让界面更加专业

## 🎨 界面优化更新

### 预设网站按钮新设计
- **只显示图标**：移除了网站名称文字，让界面更简洁
- **按钮尺寸优化**：统一为 36x36px，视觉更整齐
- **悬停提示**：鼠标悬停时显示完整网站名称
- **动画效果**：添加悬停动画和活跃状态脉冲效果

### 设计优势
1. **节省空间**：可以显示更多预设网站
2. **视觉统一**：所有按钮大小一致
3. **现代化**：符合现代应用的简洁设计趋势
4. **用户友好**：tooltip提示确保用户知道每个图标的含义

## 🎯 使用建议

1. **首次使用**：打开预设网站管理器，点击"批量更新图标"
2. **添加新网站**：直接输入URL，图标会自动获取
3. **图标异常**：可以点击魔法棒按钮重新获取
4. **网络问题**：如果网络不稳定，系统会自动重试

## 🔧 技术特点

- **异步处理**：不阻塞UI操作
- **错误处理**：完善的错误处理和用户提示
- **性能优化**：延迟执行和请求间隔控制
- **用户体验**：加载状态指示和成功反馈

## 🎉 使用效果

现在您的预设网站按钮将显示真实的网站图标，让整个界面更加美观和专业！

---

*更新时间：2025年6月17日*
